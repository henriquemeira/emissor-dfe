Implementar cancelamento de NFSe referente à Fase 2 - NFS-e (Nota Fiscal de Serviço Eletrônica) - Emissão de RPS do Município de São Paulo / SP; 

Esta transmissão tem o objetivo de efetuar o cancelamento de uma NFS-e emitida.
Utilizar o método sincrono PedidoCancelamentoNFe documentado em docs/nfse/SP/Sao_Paulo/schemas-reformatributaria-v02-4/PedidoCancelamentoNFe_v02.xsd
Deve ser utilizado a transmissão respeitando as regras DSWD estabelecidas em docs/nfse/SP/Sao_Paulo/nfews.prefeitura.sp.gov.br_lotenfe.asmx_WSDL.xml
Não interfira nos métodos de transmissão de RPS sincrono/assincrono, bem como no método de consulta;
Você deve reutilizar o que for necessário para a implementação desta funcionalidade.


Implementar Cancelamento de NFS-e referente à Fase 2 - NFS-e (Nota Fiscal de Serviço Eletrônica) - Emissão de RPS do Município de São Paulo / SP;
    
    
    
curl -X POST http://localhost:3000/api/v1/nfse/sp/sao-paulo/envio-lote-rps \
  -H "X-API-Key: 41b3db5a-692a-463e-b20e-fc9a3637e05c" \
  -H "Content-Type: application/json" \
  -d '{
    "layoutVersion": "v01-1",
    "ambiente": "producao",
    "metodo": "sincrono",
    "lote": {
      "cabecalho": {
        "cpfCnpjRemetente": {
          "cnpj": "5250772300018S"
        },
        "transacao": true,
        "dtInicio": "2026-02-01",
        "dtFim": "2026-02-17",
        "qtdRPS": 1,
        "valorTotalServicos": 1000.00,
        "valorTotalDeducoes": 0.00
      },
      "rps": [
        {
          "chaveRPS": {
            "inscricaoPrestador": 78709806,
            "serieRPS": "1",
            "numeroRPS": 1
          },
          "tipoRPS": "RPS",
          "dataEmissao": "2026-02-17",
          "statusRPS": "N",
          "tributacaoRPS": "T",
          "valorServicos": 1000.00,
          "valorDeducoes": 0.00,
          "codigoServico": 2684,
          "aliquotaServicos": 0.00,
          "issRetido": false,
          "discriminacao": "Serviços de consultoria em TI"
        }
      ]
    }
  }'


curl -X POST http://localhost:3000/api/v1/nfse/sp/sao-paulo/consulta-situacao-lote \
  -H "X-API-Key: 41b3db5a-692a-463e-b20e-fc9a3637e05c" \
  -H "Content-Type: application/json" \
  -d '{
    "layoutVersion": "v01-1",
    "ambiente": "producao",
    "cpfCnpjRemetente": {
      "cnpj": "52507723000185"
    },  
    "numeroProtocolo": "569a03f0dd074b6880343051c2112b7b"
  }'  
  
  | jq -r '.data.soap.response' | base64 -d | zcat



curl -X POST http://localhost:3000/api/v1/nfse/sp/sao-paulo/cancelamento-nfe \
  -H "X-API-Key: 41b3db5a-692a-463e-b20e-fc9a3637e05c" \
  -H "Content-Type: application/json" \
  -d '{
    "layoutVersion": "v01-1",
    "ambiente": "producao",
    "cancelamento": {
      "cabecalho": {
        "cpfCnpjRemetente": {"cnpj": "52507723000185"},
        "transacao": true
      },
      "detalhes": [
        {
          "chaveNFe": {
            "inscricaoPrestador": 78709806,
            "numeroNFe": 507
          }
        }
      ]
    }
  }'
  
